<!-- Enhanced Stock Modal -->
<div id="stockModal" class="fixed inset-0 z-50 hidden animate-fade-in">
    <div class="fixed inset-0 bg-black/70 backdrop-blur-md transition-opacity animate-fade-in"></div>
    <div class="fixed inset-0 z-50 flex items-center justify-center p-4 animate-scale-in">
        <div
            class="bg-gray-800/95 backdrop-blur-2xl border border-gray-700/50 rounded-3xl w-full max-w-2xl transform transition-all overflow-hidden shadow-2xl">
            <!-- Modal Header -->
            <div
                class="flex items-center justify-between px-6 py-2 border-b border-gray-700/50 bg-gradient-to-r from-gray-800 to-gray-900/80">
                <div class="flex items-center gap-4">
                    <div>
                        <h3 class="text-xl font-bold text-white" id="modalStockName">Stock Name</h3>
                        <p class="text-gray-400 text-sm mt-1 flex items-center gap-2">
                            <span id="modalSubtitle">Place Order</span>
                            <span class="text-gray-500">•</span>
                            <span class="text-green-400 font-medium" id="modalStockPrice">₹0.00</span>
                        </p>
                    </div>
                </div>
                <button id="closeModalBtn"
                    class="p-3 hover:bg-gray-700/50 rounded-2xl transition-all duration-200 hover:scale-105 active:scale-95 group">
                    <svg class="w-5 h-5 text-gray-400 group-hover:text-white transition-colors" fill="none"
                        stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>

            <!-- Tab Navigation -->
            <div class="flex border-b border-gray-700/50 bg-gray-800/50">
                <button id="buyTab"
                    class="tab-btn flex-1 px-4 py-2 text-white text-sm font-semibold border-b-2 border-emerald-500 transition-all duration-200 bg-emerald-500/10">
                    <div class="flex items-center gap-2 justify-center">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
                        </svg>
                        Buy Stock
                    </div>
                </button>
                <button id="sellTab"
                    class="tab-btn flex-1 px-4 py-2 text-gray-400 text-sm font-semibold border-b-2 border-transparent hover:text-white transition-all duration-200 hover:bg-rose-500/5">
                    <div class="flex items-center gap-2 justify-center">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4" />
                        </svg>
                        Sell Stock
                    </div>
                </button>
                <button id="analyseTab"
                    class="tab-btn flex-1 px-4 py-2 text-gray-400 text-sm font-semibold border-b-2 border-transparent hover:text-white transition-all duration-200 hover:bg-blue-500/5">
                    <div class="flex items-center gap-2 justify-center">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
                        </svg>
                        Analysis
                    </div>
                </button>
            </div>

            <!-- Modal Content -->
            <div class="overflow-y-auto max-h-[60vh] sm:max-h-[70vh] custom-scrollbar">
                <!-- Buy/Sell Tab Content -->
                <div id="orderContent" class="py-4 px-2 space-y-3">
                    <!-- Current Price Card -->
                    <div
                        class="bg-gradient-to-br from-gray-700/50 to-gray-800/50 border border-gray-600/30 rounded-lg px-4 py-2">
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400 text-sm">Current Price</span>
                            <span class="text-white font-bold text-lg" id="modalCurrentPrice">₹0.00</span>
                        </div>
                    </div>

                    <!-- Order Form -->
                    <div class="space-y-4">
                        <div>
                            <label class="block text-gray-400 text-sm font-medium mb-3">Quantity</label>
                            <div class="relative">
                                <input type="number" id="quantity" min="1" value="1"
                                    class="w-full bg-gray-700/50 border border-gray-600/30 rounded-lg px-4 py-2 text-lg text-white placeholder-gray-500 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 transition-all duration-200">
                                <div class="absolute right-3 top-1/2 transform -translate-y-1/2 flex gap-1">
                                    <button onclick="adjustQuantity(5)"
                                        class="w-8 h-8 bg-gray-600 hover:bg-gray-500 rounded-lg flex items-center justify-center text-gray-300 transition-colors">
                                        +5
                                    </button>
                                    <button onclick="adjustQuantity(10)"
                                        class="w-8 h-8 bg-gray-600 hover:bg-gray-500 rounded-lg flex items-center justify-center text-gray-300 transition-colors">
                                        +10
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Order Summary -->
                        <div
                            class="bg-gradient-to-br from-gray-700/50 to-gray-800/50 border border-gray-600/30 rounded-2xl p-4 space-y-3">
                            <div class="flex justify-between text-sm">
                                <span class="text-gray-400">Estimated Amount</span>
                                <span class="text-white font-semibold" id="estimatedCost">₹0.00</span>
                            </div>
                            <div class="flex justify-between text-sm">
                                <span class="text-gray-400">Available Funds</span>
                                <span class="text-gray-400">₹{{request.user.wallet}}</span>
                            </div>
                            <div class="h-px bg-gray-600/50 my-2"></div>
                            <div class="flex justify-between text-lg">
                                <span class="text-gray-300 font-semibold">Total Amount</span>
                                <span class="text-emerald-400 font-bold" id="totalAmount">₹0.00</span>
                            </div>
                        </div>
                    </div>

                    <!-- Action Button -->
                    <button id="orderActionBtn"
                        class="w-full py-4 bg-gradient-to-r from-emerald-500 to-emerald-600 hover:from-emerald-400 hover:to-emerald-500 border border-emerald-500/30 text-white font-bold rounded-2xl transition-all duration-200 shadow-lg shadow-emerald-500/20 hover:shadow-emerald-500/30 hover:scale-105 active:scale-95 text-lg">
                        Buy Now
                    </button>
                </div>

                <!-- Analyse Tab Content -->
                <div id="analyseContent" class="py-4 px-2 space-y-6 hidden">
                    <!-- OHLC Grid -->
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                        <div
                            class="bg-gradient-to-br from-gray-700/50 to-gray-800/50 border border-gray-600/30 rounded-2xl p-4 text-center">
                            <p class="text-gray-400 text-sm mb-2">Open</p>
                            <p class="text-white font-bold text-lg" id="ohlcOpen">₹0.00</p>
                        </div>
                        <div
                            class="bg-gradient-to-br from-gray-700/50 to-gray-800/50 border border-green-500/20 rounded-2xl p-4 text-center">
                            <p class="text-gray-400 text-sm mb-2">High</p>
                            <p class="text-green-400 font-bold text-lg" id="ohlcHigh">₹0.00</p>
                        </div>
                        <div
                            class="bg-gradient-to-br from-gray-700/50 to-gray-800/50 border border-red-500/20 rounded-2xl p-4 text-center">
                            <p class="text-gray-400 text-sm mb-2">Low</p>
                            <p class="text-red-400 font-bold text-lg" id="ohlcLow">₹0.00</p>
                        </div>
                        <div
                            class="bg-gradient-to-br from-gray-700/50 to-gray-800/50 border border-blue-500/20 rounded-2xl p-4 text-center">
                            <p class="text-gray-400 text-sm mb-2">Close</p>
                            <p class="text-blue-400 font-bold text-lg" id="ohlcClose">₹0.00</p>
                        </div>
                    </div>

                    <!-- Key Metrics -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div
                            class="bg-gradient-to-br from-gray-700/50 to-gray-800/50 border border-gray-600/30 rounded-2xl p-5">
                            <h4 class="text-white font-semibold mb-4 flex items-center gap-2">
                                <svg class="w-4 h-4 text-blue-400" fill="none" stroke="currentColor"
                                    viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
                                </svg>
                                Key Metrics
                            </h4>
                            <div class="space-y-3">
                                <div class="flex justify-between items-center py-2 border-b border-gray-600/30">
                                    <span class="text-gray-400 text-sm">Volume</span>
                                    <span class="text-white font-medium" id="volume">0</span>
                                </div>
                                <div class="flex justify-between items-center py-2 border-b border-gray-600/30">
                                    <span class="text-gray-400 text-sm">Market Cap</span>
                                    <span class="text-white font-medium" id="marketCap">₹0.00</span>
                                </div>
                                <div class="flex justify-between items-center py-2 border-b border-gray-600/30">
                                    <span class="text-gray-400 text-sm">P/E Ratio</span>
                                    <span class="text-white font-medium" id="peRatio">0.00</span>
                                </div>
                                <div class="flex justify-between items-center py-2">
                                    <span class="text-gray-400 text-sm">Dividend Yield</span>
                                    <span class="text-white font-medium" id="dividendYield">0.00%</span>
                                </div>
                            </div>
                        </div>

                        <div
                            class="bg-gradient-to-br from-gray-700/50 to-gray-800/50 border border-gray-600/30 rounded-2xl p-5">
                            <h4 class="text-white font-semibold mb-4 flex items-center gap-2">
                                <svg class="w-4 h-4 text-purple-400" fill="none" stroke="currentColor"
                                    viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M13 10V3L4 14h7v7l9-11h-7z" />
                                </svg>
                                Performance
                            </h4>
                            <div class="space-y-3">
                                <div class="flex justify-between items-center py-2 border-b border-gray-600/30">
                                    <span class="text-gray-400 text-sm">Daily Range</span>
                                    <span class="text-white font-medium" id="dailyRange">₹0.00</span>
                                </div>
                                <div class="flex justify-between items-center py-2 border-b border-gray-600/30">
                                    <span class="text-gray-400 text-sm">52W High</span>
                                    <span class="text-green-400 font-medium" id="weekHigh">₹0.00</span>
                                </div>
                                <div class="flex justify-between items-center py-2 border-b border-gray-600/30">
                                    <span class="text-gray-400 text-sm">52W Low</span>
                                    <span class="text-red-400 font-medium" id="weekLow">₹0.00</span>
                                </div>
                                <div class="flex justify-between items-center py-2">
                                    <span class="text-gray-400 text-sm">Last Updated</span>
                                    <span class="text-gray-400 text-xs" id="lastUpdated">-</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<form action="{% url 'initiate_order' %}" method="post" id="place-order-form">
    {% csrf_token %}
    <input type="hidden" name="symbol" id="symbol_input">
    <input type="hidden" name="quantity" id="quantity_input">
    <input type="hidden" name="order_type" id="order_type_input">
</form>

<script>
    // Enhanced Stock Modal Management
    let currentStockData = null;
    let currentAction = 'buy';

    function openStockModal(stockElement, action = 'buy') {
        currentStockData = {
            id: stockElement.dataset.stockId,
            symbol: stockElement.dataset.symbol,
            name: stockElement.dataset.name,
            currentPrice: parseFloat(stockElement.dataset.currentPrice),
            openPrice: parseFloat(stockElement.dataset.openPrice),
            highPrice: parseFloat(stockElement.dataset.highPrice),
            lowPrice: parseFloat(stockElement.dataset.lowPrice),
            closePrice: parseFloat(stockElement.dataset.closePrice),
            volume: parseInt(stockElement.dataset.volume),
            marketCap: parseFloat(stockElement.dataset.marketCap),
            peRatio: parseFloat(stockElement.dataset.peRatio),
            dividendYield: parseFloat(stockElement.dataset.dividendYield),
            lastUpdated: stockElement.dataset.lastUpdated
        };

        currentAction = action;

        // Update modal header
        document.getElementById('modalStockName').textContent = currentStockData.name;
        document.getElementById('modalStockPrice').textContent = `₹${currentStockData.currentPrice.toFixed(2)}`;

        // Calculate price change
        const priceChange = ((currentStockData.currentPrice - currentStockData.openPrice) / currentStockData.openPrice * 100).toFixed(2);

        // Update order content
        document.getElementById('modalCurrentPrice').textContent = `₹${currentStockData.currentPrice.toFixed(2)}`;
        updateOrderSummary();

        // Update analyse content
        updateAnalysisContent();

        // Set active tab based on action
        switchTab(action === 'sell' ? 'sell' : 'buy');

        // Show modal with animation
        const modal = document.getElementById('stockModal');
        modal.classList.remove('hidden');
        document.body.style.overflow = 'hidden';
    }

    function closeStockModal() {
        const modal = document.getElementById('stockModal');
        modal.classList.add('hidden');
        document.body.style.overflow = 'auto';
        currentStockData = null;
    }

    function switchTab(tab) {
        const tabs = ['buy', 'sell', 'analyse'];
        const orderContent = document.getElementById('orderContent');
        const analyseContent = document.getElementById('analyseContent');
        const orderActionBtn = document.getElementById('orderActionBtn');

        // Update tab buttons
        tabs.forEach(tabName => {
            const tabBtn = document.getElementById(`${tabName}Tab`);
            const isActive = tabName === tab;

            if (isActive) {
                tabBtn.classList.add('text-white', 'border-b-2');
                tabBtn.classList.remove('text-gray-400', 'border-transparent');

                if (tabName === 'buy') {
                    tabBtn.classList.add('border-emerald-500', 'bg-emerald-500/10');
                    tabBtn.classList.remove('border-rose-500', 'bg-rose-500/10', 'border-blue-500', 'bg-blue-500/10');
                } else if (tabName === 'sell') {
                    tabBtn.classList.add('border-rose-500', 'bg-rose-500/10');
                    tabBtn.classList.remove('border-emerald-500', 'bg-emerald-500/10', 'border-blue-500', 'bg-blue-500/10');
                } else {
                    tabBtn.classList.add('border-blue-500', 'bg-blue-500/10');
                    tabBtn.classList.remove('border-emerald-500', 'bg-emerald-500/10', 'border-rose-500', 'bg-rose-500/10');
                }
            } else {
                tabBtn.classList.add('text-gray-400', 'border-transparent');
                tabBtn.classList.remove('text-white', 'border-b-2', 'bg-emerald-500/10', 'bg-rose-500/10', 'bg-blue-500/10');
            }
        });

        // Update content visibility
        if (tab === 'analyse') {
            orderContent.classList.add('hidden');
            analyseContent.classList.remove('hidden');
            document.getElementById('modalSubtitle').textContent = 'Stock Analysis';
        } else {
            orderContent.classList.remove('hidden');
            analyseContent.classList.add('hidden');

            const isBuy = tab === 'buy';
            currentAction = isBuy ? 'buy' : 'sell';

            // Update order action button
            orderActionBtn.textContent = isBuy ? 'Buy Now' : 'Sell Now';
            orderActionBtn.className = `w-full py-4 bg-gradient-to-r ${isBuy ? 'from-emerald-500 to-emerald-600 hover:from-emerald-400 hover:to-emerald-500 border-emerald-500/30 shadow-emerald-500/20 hover:shadow-emerald-500/30' : 'from-rose-500 to-rose-600 hover:from-rose-400 hover:to-rose-500 border-rose-500/30 shadow-rose-500/20 hover:shadow-rose-500/30'} border text-white font-bold rounded-2xl transition-all duration-200 shadow-lg hover:scale-105 active:scale-95 text-lg`;

            document.getElementById('modalSubtitle').textContent = isBuy ? 'Place Buy Order' : 'Place Sell Order';
        }
    }

    function adjustQuantity(amount) {
        const quantityInput = document.getElementById('quantity');
        const currentValue = parseInt(quantityInput.value) || 0;
        quantityInput.value = Math.max(1, currentValue + amount);
        updateOrderSummary();
    }

    function updateOrderSummary() {
        if (!currentStockData) return;

        const quantity = parseInt(document.getElementById('quantity').value) || 1;
        const estimatedCost = quantity * currentStockData.currentPrice;
        const totalAmount = estimatedCost;

        document.getElementById('estimatedCost').textContent = `₹${estimatedCost.toFixed(2)}`;
        document.getElementById('totalAmount').textContent = `₹${totalAmount.toFixed(2)}`;
    }

    function updateAnalysisContent() {
        if (!currentStockData) return;

        // Update OHLC data
        document.getElementById('ohlcOpen').textContent = `₹${currentStockData.openPrice.toFixed(2)}`;
        document.getElementById('ohlcHigh').textContent = `₹${currentStockData.highPrice.toFixed(2)}`;
        document.getElementById('ohlcLow').textContent = `₹${currentStockData.lowPrice.toFixed(2)}`;
        document.getElementById('ohlcClose').textContent = `₹${currentStockData.closePrice.toFixed(2)}`;

        // Update metrics
        document.getElementById('volume').textContent = currentStockData.volume.toLocaleString();
        document.getElementById('marketCap').textContent = `₹${(currentStockData.marketCap / 10000000).toFixed(2)}Cr`;
        document.getElementById('peRatio').textContent = currentStockData.peRatio.toFixed(2);
        document.getElementById('dividendYield').textContent = `${currentStockData.dividendYield.toFixed(2)}%`;

        // Update performance data
        const dailyRange = (currentStockData.highPrice - currentStockData.lowPrice).toFixed(2);
        const weekHigh = (currentStockData.highPrice * 1.1).toFixed(2); // Simulated 52W high
        const weekLow = (currentStockData.lowPrice * 0.9).toFixed(2); // Simulated 52W low

        document.getElementById('dailyRange').textContent = `₹${dailyRange}`;
        document.getElementById('weekHigh').textContent = `₹${weekHigh}`;
        document.getElementById('weekLow').textContent = `₹${weekLow}`;
        document.getElementById('lastUpdated').textContent = new Date(currentStockData.lastUpdated).toLocaleString();
    }

    function getCSRFToken() {
        const name = 'csrftoken=';
        const cookies = document.cookie.split(';');
        for (let cookie of cookies) {
            cookie = cookie.trim();
            if (cookie.startsWith(name)) {
                return cookie.substring(name.length);
            }
        }
        return '';
    }
    
    function initiateOrder(symbol, quantity, order_type) {
        document.getElementById('symbol_input').value = symbol;
        document.getElementById('quantity_input').value = quantity;
        document.getElementById('order_type_input').value = order_type;
        document.getElementById('place-order-form').submit()
    }


    function placeOrder() {
        if (!currentStockData) return;

        const quantity = parseInt(document.getElementById('quantity').value) || 1;
        const symbol = currentStockData.symbol;
        const totalAmount = document.getElementById('totalAmount').textContent;
        const action = currentAction === 'buy' ? 'bought' : 'sold';
        showToast(`Successfully ${action} ${quantity} shares of ${currentStockData.symbol} for ${totalAmount}`);
        closeStockModal();
        let otype = "SELL";
        if(action == 'bought') {
            otype = "BUY"
        }
        initiateOrder(symbol, quantity, otype);
    }

    function toggleWatchlist(stockElement) {
        const stockId = stockElement.dataset.stockId;
        const stockSymbol = stockElement.dataset.symbol;

        // Simulate API call to remove from watchlist
        showToast(`${stockSymbol} removed from watchlist`);

        // Remove from UI with animation
        stockElement.style.opacity = '0';
        stockElement.style.transform = 'translateX(-100%)';
        setTimeout(() => {
            stockElement.remove();
            // Update empty state if needed
            if (document.querySelectorAll('.stock-item').length === 0) {
                window.location.reload();
            }
        }, 300);
    }

    function showToast(message, type = 'success') {
        const toast = document.getElementById('toast');
        const toastMessage = document.getElementById('toastMessage');

        // Update toast style based on type
        if (type === 'error') {
            toast.className = 'fixed top-4 right-4 z-50 hidden animate-slide-in-right';
            toast.innerHTML = `
                <div class="bg-gradient-to-r from-rose-500 to-rose-600 text-white px-6 py-4 rounded-2xl shadow-2xl flex items-center gap-3 border border-rose-400/30">
                    <div class="w-6 h-6 bg-white/20 rounded-full flex items-center justify-center">
                        <svg class="w-3 h-3 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M6 18L18 6M6 6l12 12"/>
                        </svg>
                    </div>
                    <span class="font-semibold">${message}</span>
                </div>
            `;
        } else {
            toast.className = 'fixed top-4 right-4 z-50 hidden animate-slide-in-right';
            toast.innerHTML = `
                <div class="bg-gradient-to-r from-emerald-500 to-emerald-600 text-white px-6 py-4 rounded-2xl shadow-2xl flex items-center gap-3 border border-emerald-400/30">
                    <div class="w-6 h-6 bg-white/20 rounded-full flex items-center justify-center">
                        <svg class="w-3 h-3 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"/>
                        </svg>
                    </div>
                    <span class="font-semibold">${message}</span>
                </div>
            `;
        }

        toast.classList.remove('hidden');

        setTimeout(() => {
            toast.classList.add('hidden');
        }, 4000);
    }

    // Enhanced Event Listeners
    document.addEventListener('DOMContentLoaded', function () {
        // Modal close button
        document.getElementById('closeModalBtn').addEventListener('click', closeStockModal);

        // Tab switching
        document.getElementById('buyTab').addEventListener('click', () => switchTab('buy'));
        document.getElementById('sellTab').addEventListener('click', () => switchTab('sell'));
        document.getElementById('analyseTab').addEventListener('click', () => switchTab('analyse'));

        // Quantity input changes
        document.getElementById('quantity').addEventListener('input', updateOrderSummary);

        // Order action button
        document.getElementById('orderActionBtn').addEventListener('click', placeOrder);

        // Close modal when clicking outside
        document.getElementById('stockModal').addEventListener('click', function (e) {
            if (e.target === this) {
                closeStockModal();
            }
        });

        // Add touch and swipe support for mobile
        let touchStartY = 0;
        const modalContent = document.querySelector('#stockModal > div > div');

        if (modalContent) {
            modalContent.addEventListener('touchstart', (e) => {
                touchStartY = e.touches[0].clientY;
            });

            modalContent.addEventListener('touchmove', (e) => {
                const touchY = e.touches[0].clientY;
                const diff = touchStartY - touchY;

                if (diff > 50) { // Swipe down to close
                    closeStockModal();
                }
            });
        }
    });

    // Add keyboard support
    document.addEventListener('keydown', function (e) {
        if (e.key === 'Escape') {
            closeStockModal();
        }
    });
</script>

<style>
    /* Custom Animations */
    @keyframes fade-in {
        from {
            opacity: 0;
        }

        to {
            opacity: 1;
        }
    }

    @keyframes scale-in {
        from {
            transform: scale(0.9);
            opacity: 0;
        }

        to {
            transform: scale(1);
            opacity: 1;
        }
    }

    @keyframes slide-in-right {
        from {
            transform: translateX(100%);
            opacity: 0;
        }

        to {
            transform: translateX(0);
            opacity: 1;
        }
    }

    .animate-fade-in {
        animation: fade-in 0.3s ease-out;
    }

    .animate-scale-in {
        animation: scale-in 0.3s ease-out;
    }

    .animate-slide-in-right {
        animation: slide-in-right 0.3s ease-out;
    }

    /* Enhanced Scrollbar */
    .custom-scrollbar::-webkit-scrollbar {
        width: 6px;
    }

    .custom-scrollbar::-webkit-scrollbar-track {
        background: rgba(255, 255, 255, 0.05);
        border-radius: 3px;
    }

    .custom-scrollbar::-webkit-scrollbar-thumb {
        background: linear-gradient(to bottom, #3B82F6, #8B5CF6);
        border-radius: 3px;
    }

    .custom-scrollbar::-webkit-scrollbar-thumb:hover {
        background: linear-gradient(to bottom, #2563EB, #7C3AED);
    }

    /* Smooth transitions for all interactive elements */
    .stock-item,
    .action-btn,
    .tab-btn {
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    /* Mobile optimizations */
    @media (max-width: 640px) {
        .stock-item {
            padding-left: 1rem;
            padding-right: 1rem;
        }

        .action-btn {
            padding-left: 0.75rem;
            padding-right: 0.75rem;
        }
    }

    /* Enhanced focus states for accessibility */
    button:focus-visible,
    input:focus-visible {
        outline: 2px solid #3B82F6;
        outline-offset: 2px;
    }

    /* Loading states */
    .loading {
        opacity: 0.6;
        pointer-events: none;
    }

    /* Premium gradient borders */
    .gradient-border {
        border: 1px solid;
        border-image: linear-gradient(45deg, #3B82F6, #8B5CF6) 1;
    }
</style>